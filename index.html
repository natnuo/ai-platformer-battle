<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Platformer Battle</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Setup Screen -->
        <div id="setup-screen" class="screen active">
            <h1 class="title">AI PLATFORMER BATTLE</h1>
            <p class="subtitle">Code your AI to beat the platformer!</p>
            
            <div class="editors-container">
                <div class="editor-panel player1">
                    <h2>PLAYER 1</h2>
                    <div class="editor-wrapper">
                        <textarea id="code-editor-1" spellcheck="false">// AI Function for Player 1
// Called once per tick (10 ticks/second)
// Must return within 100ms or skip this tick
//
// Parameters:
//   levelData: {
//     grid: 2D array [100][100] of tile types:
//       'air', 'lava', 'platform', 'start', 'end'
//     startPos: { x, y } - starting position
//     endPos: { x, y } - goal position
//   }
//   position: {
//     bottomLeft: { x, y },
//     bottomRight: { x, y },
//     topLeft: { x, y },
//     topRight: { x, y },
//     center: { x, y }
//   }
//   memory: any - persistent data between ticks (starts as {})
//   isGrounded: boolean - true if on a platform
//   velocity: { x, y } - current velocity
//   tick: number - current tick count
//   elapsedTime: number - seconds since level start
//
// Returns: {
//   forceX: number [-1.0, 1.0] - horizontal force
//   forceY: number [0.0, 1.0] - jump force (only works when grounded)
//   memory: any - data to persist to next tick
// }

function ai(levelData, position, memory, isGrounded, velocity, tick, elapsedTime) {
    // Example: Simple AI that moves right and jumps when grounded
    return {
        forceX: 0.5,
        forceY: isGrounded ? 0.8 : 0,
        memory: memory
    };
}</textarea>
                    </div>
                </div>
                
                <div class="editor-panel player2">
                    <h2>PLAYER 2</h2>
                    <div class="editor-wrapper">
                        <textarea id="code-editor-2" spellcheck="false">// AI Function for Player 2
// Called once per tick (10 ticks/second)
// Must return within 100ms or skip this tick
//
// Parameters:
//   levelData: {
//     grid: 2D array [100][100] of tile types:
//       'air', 'lava', 'platform', 'start', 'end'
//     startPos: { x, y } - starting position
//     endPos: { x, y } - goal position
//   }
//   position: {
//     bottomLeft: { x, y },
//     bottomRight: { x, y },
//     topLeft: { x, y },
//     topRight: { x, y },
//     center: { x, y }
//   }
//   memory: any - persistent data between ticks (starts as {})
//   isGrounded: boolean - true if on a platform
//   velocity: { x, y } - current velocity
//   tick: number - current tick count
//   elapsedTime: number - seconds since level start
//
// Returns: {
//   forceX: number [-1.0, 1.0] - horizontal force
//   forceY: number [0.0, 1.0] - jump force (only works when grounded)
//   memory: any - data to persist to next tick
// }

function ai(levelData, position, memory, isGrounded, velocity, tick, elapsedTime) {
    // Example: Simple AI that moves right and jumps when grounded
    return {
        forceX: 0.5,
        forceY: isGrounded ? 0.8 : 0,
        memory: memory
    };
}</textarea>
                    </div>
                </div>
            </div>
            
            <button id="start-btn" class="pixel-btn">START BATTLE</button>
        </div>
        
        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-header">
                <div class="player-info player1-info">
                    <span class="player-label">P1</span>
                    <span class="level-display" id="p1-level">Level 1</span>
                </div>
                <div class="timer-display">
                    <div id="elapsed-time">0.00s</div>
                    <div id="tick-count">Tick: 0</div>
                    <div id="countdown" class="hidden">Finishing in: 10s</div>
                </div>
                <div class="player-info player2-info">
                    <span class="player-label">P2</span>
                    <span class="level-display" id="p2-level">Level 1</span>
                </div>
            </div>
            
            <div class="game-container">
                <div class="game-panel player1-panel">
                    <canvas id="canvas-1" width="500" height="500"></canvas>
                </div>
                <div class="divider"></div>
                <div class="game-panel player2-panel">
                    <canvas id="canvas-2" width="500" height="500"></canvas>
                </div>
            </div>
            
            <div class="game-footer">
                <button id="restart-btn" class="pixel-btn small">RESTART</button>
            </div>
        </div>
        
        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <h1 class="title" id="winner-text">PLAYER 1 WINS!</h1>
            <div class="results-container">
                <div class="result-card player1">
                    <h2>PLAYER 1</h2>
                    <p>Levels Completed: <span id="p1-levels-completed">0</span>/10</p>
                    <p>Total Time: <span id="p1-total-time">0.00s</span></p>
                    <p>Total Ticks: <span id="p1-total-ticks">0</span></p>
                </div>
                <div class="result-card player2">
                    <h2>PLAYER 2</h2>
                    <p>Levels Completed: <span id="p2-levels-completed">0</span>/10</p>
                    <p>Total Time: <span id="p2-total-time">0.00s</span></p>
                    <p>Total Ticks: <span id="p2-total-ticks">0</span></p>
                </div>
            </div>
            <button id="play-again-btn" class="pixel-btn">PLAY AGAIN</button>
        </div>
    </div>
    
    <script src="levels.js"></script>
    <script src="game.js"></script>
</body>
</html>
